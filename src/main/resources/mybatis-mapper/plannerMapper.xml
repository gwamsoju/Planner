<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.todo.Hiplanner.mapper.plannerMapper">

    <select id="getMemo" resultType="com.todo.Hiplanner.vo.Memo" parameterType="com.todo.Hiplanner.vo.Memo">
        select do_num, title, content, wdate, begin, end, planno
        from memo where id = #{id} and begin = #{begin}
    </select>
    <insert id="insertMemo" parameterType="com.todo.Hiplanner.vo.Memo">
        INSERT INTO MEMO(DO_NUM, TITLE, CONTENT, ID, begin, end, planno) VALUES(
            MEMO_NUM.NEXTVAL, #{title}, #{content}, #{id}, #{begin}, #{end}, (SELECT COUNT(DISTINCT PLANNO)+1 FROM memo))
    </insert>
    <select id="getMemoDetail" resultType="com.todo.Hiplanner.vo.Memo" parameterType="com.todo.Hiplanner.vo.Memo">
        select title, content, wdate, begin, planno
        from memo where id = #{id} and planno=#{planno}
    </select>
    <delete id="deleteMemo" parameterType="com.todo.Hiplanner.vo.Memo">
        delete from memo where id=#{id} and planno=#{planno}
    </delete>
    <update id="updateMemo" parameterType="com.todo.Hiplanner.vo.Memo">
        update memo set title=#{title}, content=#{content}
        where id=#{id} and planno=#{planno}
    </update>
</mapper>